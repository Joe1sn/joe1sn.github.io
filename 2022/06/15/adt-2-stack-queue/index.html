<!DOCTYPE html><html lang="zh"><head><meta charset="UTF-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Joe1sn's Cabinet | 数据结构与算法-2.栈和队列</title><meta name="description" content="&lt;h1 id=&quot;stack-queue&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#stack-queue&quot;&gt;&lt;/a&gt; Stack &amp;amp; Queue&lt;/h1&gt;
&lt;blockquote&gt;
&lt;p&gt;full project can see here: &lt;a href=&quot;https://github.com/Joe1sn/ADT&quot;&gt;https://github.com/Joe1sn/ADT&lt;/a&gt;&lt;/p&gt;
&lt;p&gt;this is first note in english&lt;/p&gt;
&lt;/blockquote&gt;"><link rel="icon" href="/images/favicon.png"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700"><link rel="stylesheet" href="/css/highlights/darkula.css"><link rel="stylesheet" href="/css/main.css"><link rel="search" type="application/opensearchdescription+xml" href="https://joe1sn.eu.org/atom.xml" title="Joe1sn's Cabinet"><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="Joe1sn's Cabinet" type="application/atom+xml">
</head><body><div class="container"><header class="main-header"><h1 class="main-header__title uplize"><a class="main-header__title__link" href="/">Joe1sn's Cabinet</a></h1><nav class="main-header__nav"><ul class="main-nav"><li class="main-nav__list"><a class="main-nav__list__link" href="/" target="_self">HOME</a></li><li class="main-nav__list"><a class="main-nav__list__link" href="/archives/" target="_self">ARCHIVE</a></li><li class="main-nav__list"><a class="main-nav__list__link" href="https://github.com/Joe1sn" target="_blank">GITHUB</a></li></ul></nav></header><main class="container__wrapper"><article class="article post"><h3 class="article__title">数据结构与算法-2.栈和队列</h3><div class="article__date metadata"><div class="post-info">2022/06/15</div></div><div class="article__tags metadata">Tags:
<a class="article__tags__link metadata" href="/tags/ADT/">ADT</a></div><div class="article__body"><h1 id="stack-queue"><a class="markdownIt-Anchor" href="#stack-queue"></a> Stack &amp; Queue</h1>
<blockquote>
<p>full project can see here: <a target="_blank" rel="noopener" href="https://github.com/Joe1sn/ADT">https://github.com/Joe1sn/ADT</a></p>
<p>this is first note in english</p>
</blockquote>
<span id="more"></span>
<h1 id="stack-adt"><a class="markdownIt-Anchor" href="#stack-adt"></a> Stack ADT</h1>
<p>​	The stack is like a buket, the first one is deep down the bottom, the last one is on the top.<br />
​	This structure constrain the insert and delete operate only effect on the top of the stack, an it’s linear structure.</p>
<p><img src="D:%5CPictures%5Ctypora%5C3-stack.jpg" alt="" /></p>
<h2 id="adt"><a class="markdownIt-Anchor" href="#adt"></a> ADT</h2>
<ul>
<li>Data
<ul>
<li>0 or multi data element constitute the linear sequence <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><msub><mi>a</mi><mn>0</mn></msub><mo separator="true">,</mo><msub><mi>a</mi><mn>1</mn></msub><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><msub><mi>a</mi><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(a_0, a_1 , … , a_{n-1})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>, they’re one to one relationed</li>
</ul>
</li>
<li>Algorithm
<ul>
<li><code>create(s,max_size)</code>: Init a Stack <strong>s</strong> with max capacity of <strong>max_size</strong></li>
<li><code>destroy(s)</code>: realse the stack <strong>s</strong> storage space</li>
<li><code>is_empty(s)</code>: check the stack is empty</li>
<li><code>is_full(s)</code>: check the stack is full</li>
<li><code>top(s,x)</code>: get the top element in stack <strong>s</strong>,return it in <strong>x</strong></li>
<li><code>push(s,x)</code>: insert the element <strong>x</strong> to the top of <strong>s</strong></li>
<li><code>pop(s)</code>: pop out the top element in <strong>s</strong></li>
<li><code>clear(s)</code>: wipe out the data in stack <strong>s</strong>, but not delete data</li>
</ul>
</li>
</ul>
<h2 id="sequence-stack"><a class="markdownIt-Anchor" href="#sequence-stack"></a> sequence stack</h2>
<p>it’s easy to define the data structure</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">stack</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="type">int</span> top;</span><br><span class="line">    <span class="type">int</span> max_size;</span><br><span class="line">    element_type *element;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>
<p>the <strong>top</strong> is top element in stack, which can be see as <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><msub><mi>a</mi><mi>i</mi></msub></mrow><annotation encoding="application/x-tex">a_i</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.58056em;vertical-align:-0.15em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.31166399999999994em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathnormal mtight">i</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span></span></span></span></p>
<h3 id="create"><a class="markdownIt-Anchor" href="#create"></a> create</h3>
<p><code>create(s,max_size)</code></p>
<p>Init a Stack <strong>s</strong> with max capacity of <strong>max_size</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">status <span class="title function_">create</span><span class="params">(<span class="built_in">stack</span> *s, <span class="type">int</span> max_size)</span>&#123;</span><br><span class="line">    s-&gt;max_size = max_size;</span><br><span class="line">    s-&gt;top = <span class="number">-1</span>; <span class="comment">//not a_0, but defore a_0</span></span><br><span class="line">    s-&gt;element = (element_type*)<span class="built_in">malloc</span>(max_size*<span class="keyword">sizeof</span>(element_type));</span><br><span class="line">    <span class="keyword">if</span>(!s-&gt;element)</span><br><span class="line">        <span class="keyword">return</span> ERROR;</span><br><span class="line">    <span class="keyword">return</span> OK;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="destroy"><a class="markdownIt-Anchor" href="#destroy"></a> destroy</h3>
<p><code>destroy(s)</code></p>
<p>realse the stack <strong>s</strong> storage space</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">status <span class="title function_">destroy</span><span class="params">(<span class="built_in">stack</span> *s)</span>&#123;</span><br><span class="line">    s-&gt;max_size = <span class="number">0</span>;</span><br><span class="line">    s-&gt;top = <span class="number">-1</span>;</span><br><span class="line">    <span class="built_in">free</span>(s-&gt;element);</span><br><span class="line">    s-&gt;element = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="top"><a class="markdownIt-Anchor" href="#top"></a> top</h3>
<p><code>top(s,x)</code></p>
<p>get the top element in stack <strong>s</strong>,return it in <strong>x</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">status <span class="title function_">top</span><span class="params">(<span class="built_in">stack</span> *s,  element_type *x)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(is_empty)</span><br><span class="line">        <span class="keyword">return</span> ERROR;</span><br><span class="line">    *x = s-&gt;element[s-&gt;top];</span><br><span class="line">    <span class="keyword">return</span> OK;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="push"><a class="markdownIt-Anchor" href="#push"></a> push</h3>
<p><code>push(s,x)</code></p>
<p>insert the element <strong>x</strong> to the top of <strong>s</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">status <span class="title function_">push</span><span class="params">(<span class="built_in">stack</span> *s, element_type x)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (is_full(s))</span><br><span class="line">        <span class="keyword">return</span> ERROR;</span><br><span class="line">    s-&gt;element[s-&gt;top++] = x;</span><br><span class="line">    <span class="keyword">return</span> OK;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="pop"><a class="markdownIt-Anchor" href="#pop"></a> pop</h3>
<p><code>pop(s)</code></p>
<p>pop out the top element in <strong>s</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">status <span class="title function_">pop</span><span class="params">(<span class="built_in">stack</span> *s)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(is_empty(s))</span><br><span class="line">        <span class="keyword">return</span> ERROR;</span><br><span class="line">    s-&gt;element[s-&gt;top] = (element_type)<span class="number">0</span>;</span><br><span class="line">    s-&gt;top--;</span><br><span class="line">    <span class="keyword">return</span> OK;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="clear"><a class="markdownIt-Anchor" href="#clear"></a> clear</h3>
<p><code>clear(s)</code></p>
<p>wipe out the data in stack <strong>s</strong>, but not delete data</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">clear</span><span class="params">(<span class="built_in">stack</span> *s)</span>&#123;</span><br><span class="line">    s-&gt;top=<span class="number">-1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="test"><a class="markdownIt-Anchor" href="#test"></a> Test</h3>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;stack.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span>&#123;</span><br><span class="line">    <span class="built_in">stack</span> *s = (<span class="built_in">stack</span> *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="built_in">stack</span>));</span><br><span class="line">    create(s,<span class="number">10</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">size_t</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">        push(s,i);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">size_t</span> i = <span class="number">0</span>; i &lt; <span class="number">5</span>; i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;**loop No.%d\n&quot;</span>,i);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">size_t</span> j = <span class="number">0</span>; j &lt; s-&gt;top; j++)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;-------No.%d is %d\n&quot;</span>,j,s-&gt;element[j]);</span><br><span class="line">        pop(s);</span><br><span class="line">    &#125;</span><br><span class="line">    clear(s);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;elements number: %d\n&quot;</span>,s-&gt;top);</span><br><span class="line">    destroy(s);</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="queue-adt"><a class="markdownIt-Anchor" href="#queue-adt"></a> Queue ADT</h1>
<p>​	The queue must insert at the tail, delete at the head, it’s FIFO(First In First Out)<br />
​	The tail is called “rear”, The head is called “front”</p>
<p><img src="D:%5CPictures%5Ctypora%5C3-Queue.jpg" alt="" /></p>
<h2 id="adt-2"><a class="markdownIt-Anchor" href="#adt-2"></a> ADT</h2>
<ul>
<li>Data
<ul>
<li>0 or multi data element constitute the linear sequence <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">(</mo><msub><mi>a</mi><mn>0</mn></msub><mo separator="true">,</mo><msub><mi>a</mi><mn>1</mn></msub><mo separator="true">,</mo><mo>…</mo><mo separator="true">,</mo><msub><mi>a</mi><mrow><mi>n</mi><mo>−</mo><mn>1</mn></mrow></msub><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">(a_0, a_1 , … , a_{n-1})</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">0</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner">…</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathnormal">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.301108em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathnormal mtight">n</span><span class="mbin mtight">−</span><span class="mord mtight">1</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.208331em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span>, they’re one to one relationed</li>
<li>the max length sets to max_size</li>
</ul>
</li>
<li>Algorithm
<ul>
<li><code>create(q,max_size)</code>: Init a Queue <strong>q</strong> with max capacity of <strong>max_size</strong></li>
<li><code>destroy(q)</code>: realse the stack <strong>q</strong> storage space allocated</li>
<li><code>is_empty(q)</code>: check the queue is empty</li>
<li><code>is_full(q)</code>: check the queue is full</li>
<li><code>front(q,x)</code>: get the head element in queue <strong>q</strong>,return it in <strong>x</strong></li>
<li><code>en_queue(q,x)</code>: insert the element <strong>x</strong> to the end of <strong>q</strong></li>
<li><code>de_queue(q)</code>: delete element in <strong>q</strong></li>
<li><code>clear(q)</code>: wipe out the data in queue <strong>q</strong>, but not delete data</li>
</ul>
</li>
</ul>
<h2 id="sequence-queue"><a class="markdownIt-Anchor" href="#sequence-queue"></a> sequence queue</h2>
<p>​	refer to the figuration up here, we can define the struct like</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">queue</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="type">int</span> front;</span><br><span class="line">    <span class="type">int</span> rear;</span><br><span class="line">    <span class="type">int</span> max_size;</span><br><span class="line">    element_type *element;</span><br><span class="line">&#125;<span class="built_in">queue</span>;</span><br></pre></td></tr></table></figure>
<p><img src="D:%5CPictures%5Ctypora%5C3-queue2-1655288561121.jpg" alt="" /></p>
<p>​	There’s a phenomenon called “fake overflow”,we need to use the loop queue. if this continued the <code>rear</code> pointer will get beyond <code>front</code> <a target="_blank" rel="noopener" href="http://pointer.At">pointer.At</a> this time we need to <code>front=(front+1)%max_size</code>;<code>rear=(rear+1)%max_size</code></p>
<p>​	if <code>rear == front</code>, the queue is an empty queue</p>
<h3 id="create-2"><a class="markdownIt-Anchor" href="#create-2"></a> create</h3>
<p><code>create(q,max_size)</code></p>
<p>Init a Queue <strong>q</strong> with max capacity of <strong>max_size</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">create</span><span class="params">(<span class="built_in">queue</span> *q, <span class="type">int</span> max_size)</span>&#123;</span><br><span class="line">    q-&gt;max_size = max_size;</span><br><span class="line">    q-&gt;element = (element_type *)<span class="built_in">malloc</span>(max_size*<span class="keyword">sizeof</span>(element_type));</span><br><span class="line">    q-&gt;front = q-&gt;rear = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="destroy-2"><a class="markdownIt-Anchor" href="#destroy-2"></a> destroy</h3>
<p><code>destroy(q)</code></p>
<p>realse the stack <strong>q</strong> storage space allocated</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">destroy</span><span class="params">(<span class="built_in">queue</span> *q)</span>&#123;</span><br><span class="line">    q-&gt;max_size=<span class="number">0</span>;</span><br><span class="line">    <span class="built_in">free</span>(q-&gt;element);</span><br><span class="line">    q-&gt;front=q-&gt;rear=<span class="number">-1</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="is_empty-is_full"><a class="markdownIt-Anchor" href="#is_empty-is_full"></a> is_empty &amp; is_full</h3>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">status <span class="title function_">is_empty</span><span class="params">(<span class="built_in">queue</span> *q)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> q-&gt;front == q-&gt;rear;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">status <span class="title function_">is_full</span><span class="params">(<span class="built_in">queue</span> *q)</span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (q-&gt;rear+<span class="number">1</span>)%q-&gt;max_size==q-&gt;front;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="front"><a class="markdownIt-Anchor" href="#front"></a> front</h3>
<p><code>front(q,x)</code></p>
<p>get the head element in queue <strong>q</strong>,return it in <strong>x</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">status <span class="title function_">front</span><span class="params">(<span class="built_in">queue</span> *q, element_type *x)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(is_empty(q))</span><br><span class="line">        <span class="keyword">return</span> ERROR;</span><br><span class="line">    *x = q-&gt;element[(q-&gt;rear)%(q-&gt;max_size)];</span><br><span class="line">    <span class="keyword">return</span> OK;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="en_queue"><a class="markdownIt-Anchor" href="#en_queue"></a> en_queue</h3>
<p><code>en_queue(q,x)</code></p>
<p>insert the element <strong>x</strong> to the end of <strong>q</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">status <span class="title function_">en_queue</span><span class="params">(<span class="built_in">queue</span> *q, element_type x)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(is_full(q))</span><br><span class="line">        <span class="keyword">return</span> ERROR;</span><br><span class="line">    q-&gt;rear=q-&gt;rear%q-&gt;max_size+<span class="number">1</span>; <span class="comment">//moving rear</span></span><br><span class="line">    q-&gt;element[q-&gt;rear] = x;</span><br><span class="line">    <span class="keyword">return</span> OK;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="de_queue"><a class="markdownIt-Anchor" href="#de_queue"></a> de_queue</h3>
<p><code>de_queue(q)</code></p>
<p>delete element in <strong>q</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">status <span class="title function_">de_queue</span><span class="params">(<span class="built_in">queue</span> *q)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(is_empty(q))</span><br><span class="line">        <span class="keyword">return</span> ERROR;</span><br><span class="line">    q-&gt;front=(q-&gt;front+<span class="number">1</span>)%q-&gt;max_size;</span><br><span class="line">    <span class="keyword">return</span> OK;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="clear-2"><a class="markdownIt-Anchor" href="#clear-2"></a> clear</h3>
<p><code>clear(q)</code></p>
<p>wipe out the data in queue <strong>q</strong>, but not delete data</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">clear</span><span class="params">(<span class="built_in">queue</span> *q)</span>&#123;</span><br><span class="line">    q-&gt;front = q-&gt;rear = <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="main"><a class="markdownIt-Anchor" href="#main"></a> main</h3>
<p>test program</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;queue.h&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdlib.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">queue</span> *Q = (<span class="built_in">queue</span>*)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="built_in">queue</span>));</span><br><span class="line">    create(Q,<span class="number">11</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">20</span>; i++)</span><br><span class="line">        en_queue(Q,i+<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="number">10</span>; i++)</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;%d &quot;</span>,Q-&gt;element[i]);</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;\n&quot;</span>);</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">10</span>; i &gt; <span class="number">0</span>; i--)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;**Round : %d\n&quot;</span>,<span class="number">10</span>-i);</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> j = <span class="number">0</span>; j &lt;i; j++)</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;-------No.%d is %d\n&quot;</span>, j, Q-&gt;element[j+<span class="number">1</span>]);</span><br><span class="line">        de_queue(Q);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="expression-calculate"><a class="markdownIt-Anchor" href="#expression-calculate"></a> Expression calculate</h1>
<p>​	The expression constitute with operate number, operate symbol and delimiter.According to different put in sequence, it can divided to three expressions: infix expression(<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>+</mo><mi>b</mi><mo separator="true">;</mo></mrow><annotation encoding="application/x-tex">a+b;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">b</span><span class="mpunct">;</span></span></span></span>), prefix expression(<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>+</mo><mi>a</mi><mi>b</mi><mo separator="true">;</mo></mrow><annotation encoding="application/x-tex">+ab;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord">+</span><span class="mord mathnormal">a</span><span class="mord mathnormal">b</span><span class="mpunct">;</span></span></span></span>), postfix expression(<span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mi>b</mi><mo>+</mo><mo separator="true">;</mo></mrow><annotation encoding="application/x-tex">ab+;</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8888799999999999em;vertical-align:-0.19444em;"></span><span class="mord mathnormal">a</span><span class="mord mathnormal">b</span><span class="mord">+</span><span class="mpunct">;</span></span></span></span>),we’ll use the stack structure to calculate postfix expression.</p>
<h2 id="postfix-expression-calculate"><a class="markdownIt-Anchor" href="#postfix-expression-calculate"></a> postfix expression calculate</h2>
<p>The mainly algorithm about this method is:</p>
<ul>
<li>scan the expression left to right</li>
<li>if it’s an operate number, push it into stack</li>
<li>if it’s an operate symbol, pop two element in stack and calculated it with this operate symbol, and push it into stack</li>
</ul>
<p>here is a demo: the neighbored operate number separate with space, just like <code>23.5 12.3-2.6*</code>, and only supported <code>+-*/^</code></p>
<ul>
<li>main function read postfix expression</li>
<li>using <code>is_legal</code> check the invaild character in expression</li>
<li>if it’s valid, using <code>calculating</code> to evaluate the expression</li>
<li><code>get_item</code> to catch the element,if it’s operate symbol, call <code>do_calc</code> to evaluate</li>
</ul>
<h3 id="is_legal"><a class="markdownIt-Anchor" href="#is_legal"></a> is_legal</h3>
<p>filter the character but <code>0~9 +-*/.^</code></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">status <span class="title function_">is_legal</span><span class="params">(<span class="type">char</span> *postfix)</span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="type">int</span> i = <span class="number">0</span>; i &lt; <span class="built_in">strlen</span>(postfix); i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">char</span> c = postfix[i];</span><br><span class="line">        <span class="keyword">if</span>( !((c&gt;=<span class="string">&#x27;0&#x27;</span>&amp;&amp;c&lt;=<span class="string">&#x27;9&#x27;</span>) || c==<span class="string">&#x27;.&#x27;</span> || c==<span class="string">&#x27;+&#x27;</span> || c==<span class="string">&#x27;-&#x27;</span>|| </span><br><span class="line">                         c==<span class="string">&#x27;*&#x27;</span>|| c==<span class="string">&#x27;/&#x27;</span>|| c==<span class="string">&#x27;^&#x27;</span>))</span><br><span class="line">            <span class="keyword">return</span> ERROR;</span><br><span class="line">        <span class="keyword">return</span> OK;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="get_item"><a class="markdownIt-Anchor" href="#get_item"></a> get_item</h3>
<p><code>cur_pos</code>: get the current element then plus one.<br />
abnormal return -1, is number return 0, is operator return 1</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">status <span class="title function_">get_item</span><span class="params">(<span class="type">char</span> *postfix, <span class="type">int</span> *cur_pos, <span class="type">char</span> *item)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">int</span> i = <span class="number">0</span>, k=*cur_pos;</span><br><span class="line">    status flag;</span><br><span class="line">    <span class="keyword">if</span>(postfix[k]==<span class="string">&#x27;.&#x27;</span>) <span class="comment">//the first number can not be .</span></span><br><span class="line">        flag = ABNORMAL;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(postfix[k]&gt;=<span class="string">&#x27;0&#x27;</span> &amp;&amp; postfix[k]&lt;=<span class="string">&#x27;9&#x27;</span>) <span class="comment">//curren is number, next must be operator or number</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">while</span> ( (postfix[k]&gt;=<span class="string">&#x27;0&#x27;</span> &amp;&amp; postfix[k]&lt;=<span class="string">&#x27;9&#x27;</span>) || postfix[k]==<span class="string">&#x27;.&#x27;</span>)</span><br><span class="line">            item[i++] = postfix[k++];</span><br><span class="line">        item[i] = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line">        flag = ISNUM;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span>    <span class="comment">//is operator</span></span><br><span class="line">    &#123;</span><br><span class="line">        item[<span class="number">0</span>] = postfix[k++];</span><br><span class="line">        item[<span class="number">1</span>] = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line">        flag = ISOP;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">while</span>(postfix[k]==<span class="string">&#x27; &#x27;</span>)<span class="comment">//get the basic element</span></span><br><span class="line">        k++;</span><br><span class="line">    *cur_pos = k;</span><br><span class="line">    <span class="keyword">return</span> flag;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>i think this could be much easlier if we using python<br />
we can let the postfix expression like <code>25 16 - 4 * </code><br />
in python, pseudo-code be like:</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">get_item</span>(<span class="params">exp</span>):</span><br><span class="line">    exp = exp.split(<span class="string">&#x27; &#x27;</span>)</span><br><span class="line">	<span class="keyword">for</span> e <span class="keyword">in</span> exp:</span><br><span class="line">        <span class="keyword">if</span> e.is_number(): do_sth()</span><br><span class="line">        <span class="keyword">elif</span> e <span class="keyword">in</span> operator: do_sth()</span><br><span class="line">        <span class="keyword">else</span>: return_error()</span><br></pre></td></tr></table></figure>
<h3 id="do_calc"><a class="markdownIt-Anchor" href="#do_calc"></a> do_calc</h3>
<p>this is the core function the <code>calculating</code> used</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">void</span> <span class="title function_">do_calc</span><span class="params">(<span class="built_in">stack</span> *s, <span class="type">char</span> op)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">double</span> rvalue,lvalue;</span><br><span class="line">    <span class="keyword">if</span>(!top(s,&amp;rvalue)) <span class="comment">//pop right value</span></span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">    pop(s);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(!top(s,&amp;lvalue)) <span class="comment">//pop left value</span></span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">    pop(s);</span><br><span class="line">    <span class="keyword">switch</span> (op)</span><br><span class="line">    &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;+&#x27;</span>:</span><br><span class="line">        push(s,lvalue+rvalue);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;-&#x27;</span>:</span><br><span class="line">        push(s,lvalue-rvalue);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;*&#x27;</span>:</span><br><span class="line">        push(s,lvalue*rvalue);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;/&#x27;</span>:</span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">fabs</span>(rvalue)==<span class="number">0</span>)&#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;can&#x27;t divid 0\n&quot;</span>);</span><br><span class="line">            <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        push(s,lvalue/rvalue);</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;^&#x27;</span>:</span><br><span class="line">        push(s,<span class="built_in">pow</span>(lvalue,rvalue));</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    <span class="keyword">default</span>:</span><br><span class="line">        <span class="keyword">break</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="calculating"><a class="markdownIt-Anchor" href="#calculating"></a> calculating</h3>
<p>according to the <code>get_item</code> returned result</p>
<ul>
<li>is number: push into stack</li>
<li>is op: calc</li>
<li>other: get error</li>
</ul>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line">element_type <span class="title function_">calculating</span><span class="params">(<span class="type">char</span> *postfix)</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="built_in">stack</span> *s = (<span class="built_in">stack</span> *)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(<span class="built_in">stack</span>));</span><br><span class="line">    <span class="type">char</span> item[max_item];    <span class="comment">//store operator</span></span><br><span class="line">    element_type data;</span><br><span class="line">    status flag = ABNORMAL;</span><br><span class="line">    <span class="type">int</span> cur_pos = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (postfix[cur_pos]==<span class="string">&#x27; &#x27;</span>)   <span class="comment">//filter space</span></span><br><span class="line">        cur_pos++;</span><br><span class="line"></span><br><span class="line">    create(s,max_item); <span class="comment">//creating stack</span></span><br><span class="line">    <span class="keyword">while</span> (cur_pos &lt; <span class="built_in">strlen</span>(postfix)) <span class="comment">//start scanning</span></span><br><span class="line">    &#123;</span><br><span class="line">        flag = get_item(postfix, &amp;cur_pos, item);</span><br><span class="line">        <span class="keyword">if</span>(flag == ABNORMAL)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;abnormal: invalid element!\n&quot;</span>);</span><br><span class="line">            <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span> (flag == ISOP)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">switch</span> (item[<span class="number">0</span>])</span><br><span class="line">            &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;+&#x27;</span>:</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;-&#x27;</span>:</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;*&#x27;</span>:</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;/&#x27;</span>:</span><br><span class="line">            <span class="keyword">case</span> <span class="string">&#x27;^&#x27;</span>:</span><br><span class="line">                do_calc(s,item[<span class="number">0</span>]);</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">else</span> <span class="comment">//is number</span></span><br><span class="line">        &#123;</span><br><span class="line">            data = atof(item);<span class="comment">//return string to float</span></span><br><span class="line">            push(s,data);</span><br><span class="line">        &#125;   </span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(s-&gt;top == <span class="number">0</span>) <span class="comment">//only got one element in stack</span></span><br><span class="line">        top(s, &amp;data);</span><br><span class="line">    <span class="keyword">else</span>&#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;abnoraml: have redundant operator!&quot;</span>);</span><br><span class="line">        <span class="built_in">exit</span>(<span class="number">0</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    destroy(s);</span><br><span class="line">    <span class="keyword">return</span> data;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="main-2"><a class="markdownIt-Anchor" href="#main-2"></a> main</h3>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="type">int</span> <span class="title function_">main</span><span class="params">()</span></span><br><span class="line">&#123;</span><br><span class="line">    <span class="type">char</span> postfix[postfix_size];</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;please input the postfix expression:\n&quot;</span>);</span><br><span class="line">    gets(postfix);</span><br><span class="line">    <span class="keyword">if</span>(!is_legal(postfix))</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;abnormal: have invalid character in postfix\n&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> ERROR;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//two decimal places</span></span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">&quot;%s = %.2f\n&quot;</span>,postfix,calculating(postfix));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="infix-to-postfix"><a class="markdownIt-Anchor" href="#infix-to-postfix"></a> infix to postfix</h2>
<p>​	Even postfix expression is easy for computer to read,but not human is easy <a target="_blank" rel="noopener" href="http://to.So">to.So</a> we need transfer infix to postfix expression, then let computer calculated it.</p>
<ul>
<li>Init the stack, <code>#</code> standard for starting push into stack</li>
<li>scan element from left to right
<ul>
<li>if it is number, output</li>
<li>if it is <code>)</code>, keep output till meet <code>(</code></li>
<li>if it is operator or <code>(</code>, compare the pirority: InComming and in-stack
<ul>
<li>InComming and in-stack: output stack till InComming and in-stack</li>
</ul>
</li>
</ul>
</li>
<li>after scanning, output the stack</li>
</ul>
<p>About the ICP and ISP, we can set the value to compare it</p>
<table>
<thead>
<tr>
<th>Operator</th>
<th><code>#</code></th>
<th><code>(</code></th>
<th><code>* /</code></th>
<th><code>+ -</code></th>
<th><code>)</code></th>
</tr>
</thead>
<tbody>
<tr>
<td>ICP</td>
<td>0</td>
<td>7</td>
<td>4</td>
<td>2</td>
<td>1</td>
</tr>
<tr>
<td>ISP</td>
<td>0</td>
<td>1</td>
<td>5</td>
<td>3</td>
<td>7</td>
</tr>
</tbody>
</table>
<p>It’s easy to accomplished the program</p>
<h1 id="recursion"><a class="markdownIt-Anchor" href="#recursion"></a> recursion</h1>
<p>it’s useful tools to write program,but in here</p>
<p>Omit.</p>
</div></article><section class="comments"><div id="disqus_thread"></div><script>var disqus_shortname = 'disqus';
(function () {
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//#{theme.disqus}.disqus.com/count.js" async></script></section><div class="pagination"><a class="pagination__link pagination__prev" href="/2022/06/20/adt-3-array-string/">prev_post</a><a class="pagination__link pagination__next" href="/2022/06/14/adt-1-list/">next_post</a></div></main><footer class="footer metadata"><p class="footer__text">© 2023 Joe1sn</p><p class="footer__text">Powered by <a class="footer__text__link" href="https://hexo.io/" target="_blank">Hexo</a> &amp; <a class="footer__text__link" href="https://pages.github.com/" target="_blank">Github Page</a></p></footer></div></body></html>