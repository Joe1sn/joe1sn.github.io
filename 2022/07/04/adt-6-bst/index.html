<!DOCTYPE html><html lang="zh"><head><meta charset="UTF-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1"><title>Joe1sn's Cabinet | 数据结构与算法-6.二叉搜索树</title><meta name="description" content="&lt;h1 id=&quot;binary-search-tree&quot;&gt;&lt;a class=&quot;markdownIt-Anchor&quot; href=&quot;#binary-search-tree&quot;&gt;&lt;/a&gt; Binary Search Tree&lt;/h1&gt;"><link rel="icon" href="/images/favicon.png"><link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,700"><link rel="stylesheet" href="/css/highlights/darkula.css"><link rel="stylesheet" href="/css/main.css"><link rel="search" type="application/opensearchdescription+xml" href="https://joe1sn.eu.org/atom.xml" title="Joe1sn's Cabinet"><meta name="generator" content="Hexo 6.3.0"><link rel="alternate" href="/atom.xml" title="Joe1sn's Cabinet" type="application/atom+xml">
</head><body><div class="container"><header class="main-header"><h1 class="main-header__title uplize"><a class="main-header__title__link" href="/">Joe1sn's Cabinet</a></h1><nav class="main-header__nav"><ul class="main-nav"><li class="main-nav__list"><a class="main-nav__list__link" href="/" target="_self">HOME</a></li><li class="main-nav__list"><a class="main-nav__list__link" href="/archives/" target="_self">ARCHIVE</a></li><li class="main-nav__list"><a class="main-nav__list__link" href="https://github.com/Joe1sn" target="_blank">GITHUB</a></li></ul></nav></header><main class="container__wrapper"><article class="article post"><h3 class="article__title">数据结构与算法-6.二叉搜索树</h3><div class="article__date metadata"><div class="post-info">2022/07/04</div></div><div class="article__tags metadata">Tags:
<a class="article__tags__link metadata" href="/tags/ADT/">ADT</a></div><div class="article__body"><h1 id="binary-search-tree"><a class="markdownIt-Anchor" href="#binary-search-tree"></a> Binary Search Tree</h1>
<span id="more"></span>
<h2 id="definitions"><a class="markdownIt-Anchor" href="#definitions"></a> definitions</h2>
<p><strong>1.properties</strong></p>
<ul>
<li>The any two nodes in tree is not have the same value</li>
<li>If left tree isn’t empty, the every node’s value in left tree is smaller than root’s value</li>
<li>If right tree isn’t empty, the every node’s value in right tree is bigger than root’s value</li>
</ul>
<p><strong>important</strong></p>
<ul>
<li>If we traverse a binary serach tree in <strong>LVR</strong>, we’ll get a ascending sequence. The binary search tree is so called as binary sort tree</li>
</ul>
<p><strong>2.data structure</strong></p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">typedef</span> <span class="type">int</span> key_type;</span><br><span class="line"><span class="keyword">typedef</span> <span class="type">int</span> element_type;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">entry</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    key_type key;</span><br><span class="line">    element_type data;</span><br><span class="line">&#125;entry;</span><br><span class="line"></span><br><span class="line"><span class="keyword">typedef</span> <span class="class"><span class="keyword">struct</span> <span class="title">bst_node</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    entry element;</span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">bst_node</span> *<span class="title">l_child</span>;</span></span><br><span class="line">    <span class="class"><span class="keyword">struct</span> <span class="title">bst_node</span> *<span class="title">r_child</span>;</span></span><br><span class="line">&#125;bst_node, *Pbst_node;</span><br></pre></td></tr></table></figure>
<p>here we storage a dynamic element type <code>entry</code>, just like mentioned in last chapter set.</p>
<h2 id="algorithm"><a class="markdownIt-Anchor" href="#algorithm"></a> algorithm</h2>
<h3 id="search"><a class="markdownIt-Anchor" href="#search"></a> search</h3>
<p>it’s not difficult to implement this method. Because the definition is recursive, so it easily write it in recursive.</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">bst <span class="title function_">bst_rec_search</span><span class="params">(bst t, key_type k)</span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(!t)</span><br><span class="line">        <span class="keyword">return</span> ERROR;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(t-&gt;element.key == k)</span><br><span class="line">        <span class="keyword">return</span> t;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(t-&gt;element.key &gt; k)</span><br><span class="line">        <span class="keyword">return</span> bst_rec_search(t-&gt;l_child);</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        <span class="keyword">return</span> bst_rec_search(t-&gt;r_child);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>and thank to the properties of bst, it’s also easy to implement iteratly</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">bst <span class="title function_">bst_itr_search</span><span class="params">(bst t, key_type k)</span>&#123;</span><br><span class="line">    <span class="keyword">while</span>(t)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span>(t-&gt;element.key &gt; k)</span><br><span class="line">            t = t-&gt;l_child;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(t-&gt;element.key &lt; k)</span><br><span class="line">            t = t-&gt;r_child;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            <span class="keyword">return</span> t;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> ERROR;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="insert"><a class="markdownIt-Anchor" href="#insert"></a> insert</h3>
<p>According to the properties,if we insert element <code>e</code></p>
<ol>
<li><code>e</code> is differenr from any element in current bst</li>
<li>if <code>e</code> is smaller than root, inseted it into left tree</li>
<li>if <code>e</code> is bigger than root, inseted it into right tree</li>
</ol>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">BOOL <span class="title function_">bst_insert</span><span class="params">(bst *t, entry e)</span>&#123;</span><br><span class="line">    bst_node *p=t, *q, *r;</span><br><span class="line">    key_type = e.key;</span><br><span class="line">    <span class="keyword">while</span>(p)    <span class="comment">//check the same,and set `q` to the proper position</span></span><br><span class="line">    &#123;</span><br><span class="line">        q = p;</span><br><span class="line">        <span class="keyword">if</span>(p-&gt;element.key &gt; k)</span><br><span class="line">            p=p-&gt;l_child;</span><br><span class="line">        <span class="keyword">else</span> <span class="keyword">if</span>(p-&gt;element.key &lt; k)</span><br><span class="line">            p=p-&gt;r_child;</span><br><span class="line">        <span class="keyword">else</span>&#123;</span><br><span class="line">            <span class="built_in">printf</span>(<span class="string">&quot;Duplicate\n&quot;</span>);</span><br><span class="line">            <span class="keyword">return</span> ERROR;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    r = (bst)<span class="built_in">malloc</span>(<span class="keyword">sizeof</span>(bst_node)); <span class="comment">//create node</span></span><br><span class="line">    r-&gt;element = e; r-&gt;l_child=<span class="literal">NULL</span>; r-&gt;r_child=<span class="literal">NULL</span>;</span><br><span class="line">    <span class="comment">//start insert</span></span><br><span class="line">    <span class="keyword">if</span>(!t)</span><br><span class="line">        t=r;                        <span class="comment">//root node</span></span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(t-&gt;element.key &gt; k)</span><br><span class="line">        q-&gt;l_child = r;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(t-&gt;element.key &lt; k)</span><br><span class="line">        q-&gt;r_child = r;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="delete"><a class="markdownIt-Anchor" href="#delete"></a> delete</h3>
<p>I think this part is one of the most difficult in this chapter.Although it’s apprently easy to delete the leaf and the single child node, it’s hard to delete the node have both child.</p>
<p><img src="https://img.joe1sn.top/uploads/big/f069fdb7debac0ae072dae9edd01163e.jpg" alt="" /></p>
<p>The key in here is, found the smallest node in right tree or biggest in left tree.These tree must leaf node or the node have only one child, so the problem can be transmitted to these node</p>
<p>Here we take example using the smallest node in right tree, it’s <strong>node_35</strong>. And we want to delete <strong>node_30</strong></p>
<ol>
<li>set the <strong>node_30</strong> to <strong>node_35</strong></li>
<li>delete original <strong>node_35</strong>, because it’s  leaf node or the node have only one child, so we can easily set the parent node and child node, Here <strong>node_40</strong>’s left child becoming <strong>node_38</strong></li>
</ol>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line">BOOL <span class="title function_">dst_delete</span><span class="params">(bst *t, key_type k)</span></span><br><span class="line">&#123;</span><br><span class="line">    bst_node *c, *r, *s, *p = t, *q;</span><br><span class="line">    <span class="comment">//1.check if the node exists</span></span><br><span class="line">    <span class="keyword">while</span>(p &amp;&amp; p-&gt;element.key != k)</span><br><span class="line">    &#123;</span><br><span class="line">        q = p; <span class="comment">//set `q` to the proper position</span></span><br><span class="line">        <span class="keyword">if</span>(p-&gt;element.key &gt; k)</span><br><span class="line">            p = p-&gt;l_child;</span><br><span class="line">        <span class="keyword">else</span></span><br><span class="line">            p = p-&gt;r_child;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span>(!p)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">&quot;Duplicated!\n&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> ERROR;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//2.if p have both child</span></span><br><span class="line">    <span class="keyword">if</span>(p-&gt;l_child &amp;&amp; p-&gt;r_child)</span><br><span class="line">    &#123;</span><br><span class="line">        s=p-&gt;r_child;</span><br><span class="line">        r=p;</span><br><span class="line">        <span class="comment">//find p&#x27;s LVR back node `s`</span></span><br><span class="line">        <span class="keyword">while</span>(s-&gt;l_child)</span><br><span class="line">        &#123;</span><br><span class="line">            r=s;</span><br><span class="line">            s=s-&gt;l_child;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//[!]-- copy `s` to `p` --[!]</span></span><br><span class="line">        p-&gt;element = s-&gt;element;</span><br><span class="line">        p = s; q = r;</span><br><span class="line">    &#125;   <span class="comment">//now `q` is parent of `p`</span></span><br><span class="line">    <span class="comment">//3. let `c` to replace `p`</span></span><br><span class="line">    <span class="keyword">if</span>(p-&gt;l_child)</span><br><span class="line">        c = p-&gt;l_child;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">        c = p-&gt;r_child;</span><br><span class="line">    <span class="comment">//4. replacement</span></span><br><span class="line">    <span class="keyword">if</span>(p==t)                <span class="comment">//if delete root</span></span><br><span class="line">        t=c;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(p==q-&gt;l_child)  <span class="comment">//`c` replace `p`</span></span><br><span class="line">        q-&gt;l_child = c;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(p==q-&gt;r_child)</span><br><span class="line">        q-&gt;r_child = c;</span><br><span class="line">    <span class="built_in">free</span>(p);</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span>;   </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="adelson-velsky-and-landis-tree"><a class="markdownIt-Anchor" href="#adelson-velsky-and-landis-tree"></a> Adelson-Velsky and Landis Tree</h1>
<h2 id="definitions-2"><a class="markdownIt-Anchor" href="#definitions-2"></a> definitions</h2>
<p>​	In binary search tree has a problem: if we insert a sequence like <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">{</mo><mn>20</mn><mo separator="true">,</mo><mn>30</mn><mo separator="true">,</mo><mn>40</mn><mo separator="true">,</mo><mn>50</mn><mo separator="true">,</mo><mn>60</mn><mo separator="true">,</mo><mn>70</mn><mo stretchy="false">}</mo></mrow><annotation encoding="application/x-tex">\{20,30,40,50,60,70\}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">{</span><span class="mord">2</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">3</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">4</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">5</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">6</span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">7</span><span class="mord">0</span><span class="mclose">}</span></span></span></span> into bst, the deepth of the bst is <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>6</mn></mrow><annotation encoding="application/x-tex">6</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">6</span></span></span></span>, apparently it’s not convient our algorithm. This situation called “degenerate”. If we using this bst, the time complexity is <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>O</mi><mo stretchy="false">(</mo><mi>n</mi><mo stretchy="false">)</mo></mrow><annotation encoding="application/x-tex">O(n)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord mathnormal" style="margin-right:0.02778em;">O</span><span class="mopen">(</span><span class="mord mathnormal">n</span><span class="mclose">)</span></span></span></span>. But if we adjust it a little bit, we’ll get some new tree like AVL tree(binary balanced tree) , red black tree …</p>
<p>​	The different is AVL tree and bst is AVL tree’s left and right child deepth with one absolute difference.If we define a balancing-factor is left tree hight minus right tree hight, is value must <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo>−</mo><mn>1</mn><mo separator="true">,</mo><mn>0</mn><mo separator="true">,</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">-1,0,1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.8388800000000001em;vertical-align:-0.19444em;"></span><span class="mord">−</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">0</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord">1</span></span></span></span>.</p>
<h2 id="adjustment"><a class="markdownIt-Anchor" href="#adjustment"></a> adjustment</h2>
<p>the ususal way to adjust AVL tree has two:</p>
<ol>
<li>single rotation</li>
<li>double rotation</li>
</ol>
<p>and facing 4 situations</p>
<ol>
<li>LL: insert into left child’s left tree</li>
<li>RR: insert into right child’s right tree</li>
<li>LR: insert into left child’s right tree</li>
<li>RL: insert into right child’s left tree</li>
</ol>
<p>The detailed is willed explained on wiki-pedia, so won’be recited here.</p>
<h1 id="m-ary-search-tree"><a class="markdownIt-Anchor" href="#m-ary-search-tree"></a> m-ary search tree</h1>
<p>​	If we want to search lots of data outside of inside storage, we must read data outside, But I/O operations will consume efficiency.Using binart search tree or AVL only storage two element infomation at a node,what if we set more interval so onr single node can storage more infomation.</p>
<p><img src="https://img.joe1sn.top/uploads/big/acc2657415d737dbf5fb6c8215d457ba.jpg" alt="" /></p>
<p>If we want to find <strong>53</strong></p>
<ol>
<li>started from root, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>53</mn><mo>&gt;</mo><mn>35</mn></mrow><annotation encoding="application/x-tex">53 \gt 35</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68354em;vertical-align:-0.0391em;"></span><span class="mord">5</span><span class="mord">3</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&gt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">3</span><span class="mord">5</span></span></span></span>, go into right tree</li>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mn>43</mn><mo>&lt;</mo><mn>53</mn><mo>&lt;</mo><mn>78</mn></mrow><annotation encoding="application/x-tex">43 \lt 53 \lt 78</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68354em;vertical-align:-0.0391em;"></span><span class="mord">4</span><span class="mord">3</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.68354em;vertical-align:-0.0391em;"></span><span class="mord">5</span><span class="mord">3</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">&lt;</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">7</span><span class="mord">8</span></span></span></span>, go into middle tree</li>
<li>found  <strong>53</strong></li>
</ol>
<h1 id="b-tree"><a class="markdownIt-Anchor" href="#b-tree"></a> B- tree</h1>
<blockquote>
<p>In <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Computer_science">computer science</a>, a <strong>B-tree</strong> is a self-balancing <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Tree_data_structure">tree data structure</a> that maintains sorted data and allows searches, sequential access, insertions, and deletions in <a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/Logarithmic_time">logarithmic time</a>.</p>
</blockquote>
<p>One speciality is all failure node is on the same layer, and</p>
<ol>
<li>root node have two children at least</li>
<li>except root and failure node, the other nodes at least have <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mi>m</mi><mi mathvariant="normal">/</mi><mn>2</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[m/2]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathnormal">m</span><span class="mord">/</span><span class="mord">2</span><span class="mclose">]</span></span></span></span> nodes</li>
</ol>
<h2 id="properties"><a class="markdownIt-Anchor" href="#properties"></a> properties</h2>
<h3 id="b-trees-height"><a class="markdownIt-Anchor" href="#b-trees-height"></a> B- tree’s height</h3>
<ul>
<li>
<p><strong>property</strong>: if b-tree have <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">s</span></span></span></span> failure nodes, the tree have <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>=</mo><mi>s</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">N=s-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span> nodes in total</p>
<p>Proof:</p>
<ol>
<li>each non-failure node contains element <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi></mrow><annotation encoding="application/x-tex">a</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">a</span></span></span></span> is smaller only one than it contained pointer <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>b</mi></mrow><annotation encoding="application/x-tex">b</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.69444em;vertical-align:0em;"></span><span class="mord mathnormal">b</span></span></span></span>, it’s <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>a</mi><mo>=</mo><mi>b</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">a=b-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">a</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.77777em;vertical-align:-0.08333em;"></span><span class="mord mathnormal">b</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span></li>
<li>assume we have <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>n</mi></mrow><annotation encoding="application/x-tex">n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span> non-fail nodes, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>s</mi></mrow><annotation encoding="application/x-tex">s</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">s</span></span></span></span> failure nodes, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span> nodes in B-tree, <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi></mrow><annotation encoding="application/x-tex">t</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.61508em;vertical-align:0em;"></span><span class="mord mathnormal">t</span></span></span></span> pointers in tree. So <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>=</mo><mi>t</mi><mo>−</mo><mi>n</mi></mrow><annotation encoding="application/x-tex">N=t-n</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.69841em;vertical-align:-0.08333em;"></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span></span></span></span></li>
<li>the sum of pointers equals non=fail plus failure nodes except the root. <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>t</mi><mo>=</mo><mi>n</mi><mo>+</mo><mi>s</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">t=n+s-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.61508em;vertical-align:0em;"></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span></li>
<li>according to these two equaltions <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>+</mo><mi>n</mi><mo>=</mo><mi>t</mi><mo>=</mo><mi>n</mi><mo>+</mo><mi>s</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">N+n=t=n+s-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.76666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.61508em;vertical-align:0em;"></span><span class="mord mathnormal">t</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal">n</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>,So <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi><mo>=</mo><mi>s</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">N=s-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal">s</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span></li>
</ol>
</li>
<li>
<p><strong>theorem</strong>: A B-tree have <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>N</mi></mrow><annotation encoding="application/x-tex">N</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.68333em;vertical-align:0em;"></span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span></span></span></span> elements and og order <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi></mrow><annotation encoding="application/x-tex">m</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathnormal">m</span></span></span></span> , have the height  <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>h</mi><mo>≤</mo><mn>1</mn><mo>+</mo><mi>l</mi><mi>o</mi><msub><mi>g</mi><mrow><mo stretchy="false">[</mo><mi>m</mi><mi mathvariant="normal">/</mi><mn>2</mn><mo stretchy="false">]</mo></mrow></msub><mo stretchy="false">(</mo><mi>N</mi><mo>+</mo><mn>1</mn><mo stretchy="false">)</mo><mi mathvariant="normal">/</mi><mn>2</mn></mrow><annotation encoding="application/x-tex">h \le 1+ log_{[m/2]}(N+1)/2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.83041em;vertical-align:-0.13597em;"></span><span class="mord mathnormal">h</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.72777em;vertical-align:-0.08333em;"></span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.1052em;vertical-align:-0.3551999999999999em;"></span><span class="mord mathnormal" style="margin-right:0.01968em;">l</span><span class="mord mathnormal">o</span><span class="mord"><span class="mord mathnormal" style="margin-right:0.03588em;">g</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.34480000000000005em;"><span style="top:-2.5198em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mopen mtight">[</span><span class="mord mathnormal mtight">m</span><span class="mord mtight">/</span><span class="mord mtight">2</span><span class="mclose mtight">]</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.3551999999999999em;"><span></span></span></span></span></span></span><span class="mopen">(</span><span class="mord mathnormal" style="margin-right:0.10903em;">N</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">)</span><span class="mord">/</span><span class="mord">2</span></span></span></span></p>
</li>
</ul>
<h3 id="search-2"><a class="markdownIt-Anchor" href="#search-2"></a> search</h3>
<p>basically as same as m-ary search tree</p>
<h3 id="insertion"><a class="markdownIt-Anchor" href="#insertion"></a> insertion</h3>
<ol>
<li>search if there’s same element</li>
<li>because the B-tree is a m-ary search tree, so after insertion the leaf elements must not more than <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mi>m</mi><mo>−</mo><mn>1</mn></mrow><annotation encoding="application/x-tex">m-1</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathnormal">m</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">1</span></span></span></span>
<ul>
<li>if insert succed, return;</li>
<li>else, do separate</li>
</ul>
</li>
<li><strong>separate</strong>. divided node <code>q</code> into three parts.
<ul>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mn>1</mn><mo separator="true">,</mo><mo stretchy="false">[</mo><mi>m</mi><mi mathvariant="normal">/</mi><mn>2</mn><mo stretchy="false">]</mo><mo>−</mo><mn>1</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[1,[m/2]-1]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mopen">[</span><span class="mord mathnormal">m</span><span class="mord">/</span><span class="mord">2</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mclose">]</span></span></span></span> keep in origin node</li>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mo stretchy="false">[</mo><mi>m</mi><mi mathvariant="normal">/</mi><mn>2</mn><mo stretchy="false">]</mo><mo>+</mo><mn>1</mn><mo separator="true">,</mo><mi>m</mi><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[[m/2]+1,m]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mopen">[</span><span class="mord mathnormal">m</span><span class="mord">/</span><span class="mord">2</span><span class="mclose">]</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">1</span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord mathnormal">m</span><span class="mclose">]</span></span></span></span> store the element in new node <code>q'</code></li>
<li><span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mi>m</mi><mi mathvariant="normal">/</mi><mn>2</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[m/2]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathnormal">m</span><span class="mord">/</span><span class="mord">2</span><span class="mclose">]</span></span></span></span> and <code>q'</code> insert to the <code>q</code>’s parent node.(Normally <span class="katex"><span class="katex-mathml"><math xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mrow><mo stretchy="false">[</mo><mi>m</mi><mi mathvariant="normal">/</mi><mn>2</mn><mo stretchy="false">]</mo></mrow><annotation encoding="application/x-tex">[m/2]</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">[</span><span class="mord mathnormal">m</span><span class="mord">/</span><span class="mord">2</span><span class="mclose">]</span></span></span></span> is in parent node, <code>q'</code> is pointed by the parent)</li>
</ul>
</li>
<li>keep separate till their’s no overflow</li>
</ol>
<h1 id="reference"><a class="markdownIt-Anchor" href="#reference"></a> reference</h1>
<p><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/M-ary_tree">https://en.wikipedia.org/wiki/M-ary_tree</a></p>
<p><a target="_blank" rel="noopener" href="https://en.wikipedia.org/wiki/B-tree">https://en.wikipedia.org/wiki/B-tree</a></p>
</div></article><section class="comments"><div id="disqus_thread"></div><script>var disqus_shortname = 'disqus';
(function () {
  var dsq = document.createElement('script');
  dsq.type = 'text/javascript';
  dsq.async = true;
  dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
  (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
})();</script><script id="dsq-count-scr" src="//#{theme.disqus}.disqus.com/count.js" async></script></section><div class="pagination"><a class="pagination__link pagination__prev" href="/2022/07/05/adt-7-hash/">prev_post</a><a class="pagination__link pagination__next" href="/2022/07/04/adt-5-set/">next_post</a></div></main><footer class="footer metadata"><p class="footer__text">© 2023 Joe1sn</p><p class="footer__text">Powered by <a class="footer__text__link" href="https://hexo.io/" target="_blank">Hexo</a> &amp; <a class="footer__text__link" href="https://pages.github.com/" target="_blank">Github Page</a></p></footer></div></body></html>